<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 5 Análisis de redes | Diego Armando Datos</title>
<meta name="author" content="Metodistas del Sur">
<meta name="description" content="library(tidygraph) #&gt; #&gt; Attaching package: 'tidygraph' #&gt; The following object is masked from 'package:stats': #&gt; #&gt;   filter library(ggraph) #&gt; Registered S3 method overwritten by 'ggforce': #&gt; ...">
<meta name="generator" content="bookdown 0.25.3 with bs4_book()">
<meta property="og:title" content="Capítulo 5 Análisis de redes | Diego Armando Datos">
<meta property="og:type" content="book">
<meta property="og:description" content="library(tidygraph) #&gt; #&gt; Attaching package: 'tidygraph' #&gt; The following object is masked from 'package:stats': #&gt; #&gt;   filter library(ggraph) #&gt; Registered S3 method overwritten by 'ggforce': #&gt; ...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 5 Análisis de redes | Diego Armando Datos">
<meta name="twitter:description" content="library(tidygraph) #&gt; #&gt; Attaching package: 'tidygraph' #&gt; The following object is masked from 'package:stats': #&gt; #&gt;   filter library(ggraph) #&gt; Registered S3 method overwritten by 'ggforce': #&gt; ...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Lato-0.4.1/font.css" rel="stylesheet">
<link href="libs/_Roboto%20Mono-0.4.1/font.css" rel="stylesheet">
<link href="libs/_Open%20Sans-0.4.1/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="libs/leaflet-1.3.1/leaflet.js"></script><link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="libs/proj4-2.6.2/proj4.min.js"></script><script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script><script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script><script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script><link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet">
<script src="libs/HomeButton-0.0.1/home-button.js"></script><script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script><script src="libs/clipboard-0.0.1/setClipboardText.js"></script><link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet">
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Diego Armando Datos</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Buscar" aria-label="Buscar">
</form>

      <nav aria-label="Contenido"><h2>Contenido</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Presentación y objetivos del informe</a></li>
<li><a class="" href="dise%C3%B1o-de-la-encuesta.html"><span class="header-section-number">1</span> Diseño de la encuesta</a></li>
<li><a class="" href="cross.html"><span class="header-section-number">2</span> Limpieza y consistencia de los datos</a></li>
<li><a class="" href="an%C3%A1lisis-espaciales.html"><span class="header-section-number">3</span> Análisis Espaciales</a></li>
<li><a class="" href="an%C3%A1lisis-de-texto.html"><span class="header-section-number">4</span> Análisis de texto</a></li>
<li><a class="active" href="an%C3%A1lisis-de-redes.html"><span class="header-section-number">5</span> Análisis de redes</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/diegoteca/cuanti_analisis_de_datos/tree/main/_book">Ver repositorio <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="análisis-de-redes" class="section level1" number="5">
<h1>
<span class="header-section-number">Capítulo 5</span> Análisis de redes<a class="anchor" aria-label="anchor" href="#an%C3%A1lisis-de-redes"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidygraph.data-imaginist.com">tidygraph</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'tidygraph'</span>
<span class="co">#&gt; The following object is masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com">ggraph</a></span><span class="op">)</span>
<span class="co">#&gt; Registered S3 method overwritten by 'ggforce':</span>
<span class="co">#&gt;   method           from </span>
<span class="co">#&gt;   scale_type.units units</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
           </code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Levanto el dataset de la encuesta</span>
<span class="co"># Pongo "redes_tu_nombre"como primera columna</span>
<span class="va">df_encuesta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"Outputs"</span>, <span class="st">"df_encuesta.rds"</span><span class="op">)</span><span class="op">)</span> |&gt;
               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">redes_tu_nombre</span><span class="op">)</span></code></pre></div>
<p>El insumo de estos análisis es una serie de preguntas en donde cada estudiante debe elegir, entre todos los estudiantes de ese cuatrimestre, a 5 a los que más conoce. Sin embargo, dado el formato específico de la pregunta se trata de un dato que, si bien no puede considerarse estructurado, se aleja un poco de otros ejemplos de datos no estructurados como los textos provenientes de entrevistas en profundidad, de canciones o de discursos presidenciales.</p>
<p>En este caso se trata de 3 palabras por cada encuestado. Expresado en el léxico de una matriz de datos se trata de 3 columnas por cada fila. Para facilitar el siguiente análisis lo que primero debemos realizar es un “alargamiento” de la matriz de datos para tener una sola columna y más filas que, en principio, se repetirían 3 veces.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nodes</span> <span class="op">&lt;-</span> <span class="va">df_encuesta</span> |&gt;
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">redes_tu_nombre</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Hay que realizar desde el archivo de la encuesta dos columnas (from, to) en donde</span>
<span class="co"># el "from" sea el encuestado "redes_tun_nombre" y que el "to" sea el estudiante a quien haya </span>
<span class="co"># elegido. Dado que cada encuestado elige a 5 estudiantes en este nuevo objeto debería</span>
<span class="co"># haber 5 filas por encuestado.</span>
<span class="co"># Luego de eso se debería filtrar "los edges" para que queden sólo aquellos que están presentes</span>
<span class="co"># en el "nodes", esto es, con los que contestaron la encuesta.</span>
<span class="co"># </span>
<span class="co"># Se podría agregar otras columnas al edge</span>
<span class="co">#       cuanti_comision,</span>
<span class="co">#                       unaj_ano_ingreso,</span>
<span class="co">#                       unaj_n_materias_aprobadas,</span>
<span class="co">#                       unaj_n_materias_aprobadas_10</span>

<span class="va">edges</span> <span class="op">&lt;-</span> <span class="va">df_encuesta</span> |&gt;
                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">mail</span>,
                       <span class="va">redes_tu_nombre</span>,
                       <span class="va">redes_1_contacto</span>,
                       <span class="va">redes_2_contacto</span>,
                       <span class="va">redes_3_contacto</span>,
                       <span class="va">redes_4_contacto</span>,
                       <span class="va">redes_5_contacto</span>,
                       <span class="va">cuanti_docente</span>,
                       <span class="va">unaj_ano_ingreso</span>,
                       <span class="va">unaj_n_materias_aprobadas</span>,
                       <span class="va">unaj_n_materias_aprobadas_10</span><span class="op">)</span> |&gt;
                <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>
                             <span class="va">redes_1_contacto</span>,
                             <span class="va">redes_2_contacto</span>,
                             <span class="va">redes_3_contacto</span>,
                             <span class="va">redes_4_contacto</span>,
                             <span class="va">redes_5_contacto</span><span class="op">)</span>,
                             names_to <span class="op">=</span> <span class="st">"orden_del_contacto"</span>,
                             values_to <span class="op">=</span> <span class="st">"to"</span><span class="op">)</span> |&gt;
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>intensidad_relacion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span><span class="op">(</span><span class="va">orden_del_contacto</span> <span class="op">==</span> <span class="st">"redes_1_contacto"</span> <span class="op">~</span> <span class="st">"1"</span>,
                                                     <span class="va">orden_del_contacto</span> <span class="op">==</span> <span class="st">"redes_2_contacto"</span> <span class="op">~</span> <span class="st">"2"</span>,
                                                     <span class="va">orden_del_contacto</span> <span class="op">==</span> <span class="st">"redes_3_contacto"</span> <span class="op">~</span> <span class="st">"3"</span>,
                                                     <span class="va">orden_del_contacto</span> <span class="op">==</span> <span class="st">"redes_4_contacto"</span> <span class="op">~</span> <span class="st">"4"</span>,
                                                     <span class="va">orden_del_contacto</span> <span class="op">==</span> <span class="st">"redes_5_contacto"</span> <span class="op">~</span> <span class="st">"5"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> |&gt;
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">mail</span>, <span class="va">orden_del_contacto</span><span class="op">)</span><span class="op">)</span> |&gt;
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join</a></span><span class="op">(</span><span class="va">nodes</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"to"</span> <span class="op">=</span> <span class="st">"redes_tu_nombre"</span><span class="op">)</span><span class="op">)</span> |&gt;
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>from <span class="op">=</span> <span class="va">redes_tu_nombre</span><span class="op">)</span> |&gt;
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">to</span><span class="op">)</span>
          </code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Creo la red </span>
<span class="va">red</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/tbl_graph.html">tbl_graph</a></span><span class="op">(</span>nodes <span class="op">=</span> <span class="va">nodes</span>,
                 node_key <span class="op">=</span> <span class="st">"redes_tu_nombre"</span>,
                 edges <span class="op">=</span> <span class="va">edges</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">red_diego</span> <span class="op">&lt;-</span> <span class="va">red</span> |&gt;
<span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/activate.html">activate</a></span><span class="op">(</span><span class="va">nodes</span><span class="op">)</span> |&gt;
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">cuanti_docente</span> <span class="op">==</span> <span class="st">"Diego Quartulli"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">red</span>, layout <span class="op">=</span> <span class="st">"kk"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">graph_diego</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">red_diego</span>, layout <span class="op">=</span> <span class="st">"kk"</span>, maxiter <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">graph_diego</span></code></pre></div>
<div class="inline-figure"><img src="cuanti_analisis_datos_files/figure-html/ggraph_diego-1.png" width="672"></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="va">red</span>, layout <span class="op">=</span> <span class="st">"kk"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cuanti_docente</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">graph</span></code></pre></div>
<div class="inline-figure"><img src="cuanti_analisis_datos_files/figure-html/unnamed-chunk-7-1.png" width="672"></div>

<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-bookdown" class="csl-entry">
Xie, Yihui. <em>Bookdown: Authoring Books and Technical Documents with r Markdown</em>, 2021. <a href="https://CRAN.R-project.org/package=bookdown">https://CRAN.R-project.org/package=bookdown</a>.
</div>
<div id="ref-xie2015" class="csl-entry">
———. <em>Dynamic Documents with <span>R</span> and Knitr</em>. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC, 2015. <a href="http://yihui.org/knitr/">http://yihui.org/knitr/</a>.
</div>
</div>
</div>









  <div class="chapter-nav">
<div class="prev"><a href="an%C3%A1lisis-de-texto.html"><span class="header-section-number">4</span> Análisis de texto</a></div>
<div class="empty"></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="Índice capítulo"><h2>Índice capítulo</h2>
      <ul class="nav navbar-nav"><li><a class="nav-link" href="#an%C3%A1lisis-de-redes"><span class="header-section-number">5</span> Análisis de redes</a></li></ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/diegoteca/cuanti_analisis_de_datos/tree/main/_book/blob/master/05-redes.Rmd">Ver fuente <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/diegoteca/cuanti_analisis_de_datos/tree/main/_book/edit/master/05-redes.Rmd">Editar esta página <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Diego Armando Datos</strong>" fue escrito por Metodistas del Sur. Fue actualizado la última vez el 2022-04-04.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>El libro fue hecho íntegramente con el programa R, principalmente con el paquete <a class="text-light" href="https://bookdown.org">bookdown</a></p>
  </div>

</div></div>
</footer>
</body>
</html>
