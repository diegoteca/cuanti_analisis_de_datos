# Análisis de redes

```{r librerias_redes}
library(tidygraph)
library(ggraph)
library(stringr)
library(tidyverse)
           
```

```{r insumo_redes}
# Levanto el dataset de la encuesta

df_encuesta <- read_rds(here::here("Outputs", "df_encuesta.rds"))
```

El insumo de estos análisis es una serie de preguntas en donde cada estudiante debe elegir, entre todos los estudiantes de ese cuatrimestre, a 5 a los que más conoce. Sin embargo, dado el formato específico de la pregunta se trata de un dato que, si bien no puede considerarse estructurado, se aleja un poco de otros ejemplos de datos no estructurados como los textos provenientes de entrevistas en profundidad, de canciones o de discursos presidenciales.

En este caso se trata de 3 palabras por cada encuestado. Expresado en el léxico de una matriz de datos se trata de 3 columnas por cada fila. Para facilitar el siguiente análisis lo que primero debemos realizar es un "alargamiento" de la matriz de datos para tener una sola columna y más filas que, en principio, se repetirían 3 veces.

```{r alargamiento_redes}

redes_longer <- df_encuesta |>
                select(redes_tu_nombre,
                       redes_1_contacto,
                       redes_2_contacto,
                       redes_3_contacto,
                       redes_4_contacto,
                       redes_5_contacto) |>
                pivot_longer(c(redes_tu_nombre,
                             redes_1_contacto,
                             redes_2_contacto,
                             redes_3_contacto,
                             redes_4_contacto,
                             redes_5_contacto),
                             names_to = "to",
                             values_to = "from")
```
```
grafo <- as_tbl_graph(df_encuesta,
                      directed = TRUE,
                      names_to = )
```


```{r alargamiento_redes2}

df_longer <- df_encuesta |>
             select(dni, 
                    unaj_ano_ingreso,
                    unaj_n_materias_aprobadas,
                    sexo,
                    hog_convivencia_hijes,
                    cuanti_1_palabra, 
                    cuanti_2_palabra, 
                    cuanti_3_palabra) |>
             pivot_longer(c(cuanti_1_palabra,
                          cuanti_2_palabra,
                          cuanti_3_palabra),
                          names_to = "orden_palabra",
                          values_to = "cuanti_palabras")
                      
```

